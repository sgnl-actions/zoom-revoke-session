# yaml-language-server: $schema=https://raw.githubusercontent.com/sgnl-actions/schemas/main/metadata.schema.json
name: zoom-revoke-session
description: Revoke SSO token for a Zoom user

# Input parameters for web form generation
inputs:
  userId:
    type: text
    description: The Zoom user ID to revoke SSO token for
    required: true
    validation:
      min: 1
      max: 100

  address:
    type: text
    description: Zoom API base URL (e.g., https://api.zoom.us)
    required: false
    validation:
      min: 1
      max: 255

# Expected output structure
outputs:
  userId:
    type: text
    description: The Zoom user ID that was processed

  tokenRevoked:
    type: boolean
    description: Whether the SSO token was successfully revoked

  revokedAt:
    type: datetime
    description: When the revocation completed (ISO 8601)

# Secrets (configured at deployment time)
secrets:
  BEARER_AUTH_TOKEN:
    description: Zoom API Bearer token (for Bearer authentication)
    required: false

  BASIC_USERNAME:
    description: Username for Basic authentication
    required: false

  BASIC_PASSWORD:
    description: Password for Basic authentication
    required: false

  OAUTH2_CLIENT_CREDENTIALS_CLIENT_SECRET:
    description: Client secret for OAuth2 Client Credentials flow
    required: false

  OAUTH2_AUTHORIZATION_CODE_ACCESS_TOKEN:
    description: Access token for OAuth2 Authorization Code flow
    required: false

environment:
  ADDRESS:
    description: Zoom API base URL
    default: "https://api.zoom.us"

  OAUTH2_CLIENT_CREDENTIALS_CLIENT_ID:
    description: Client ID for OAuth2 Client Credentials flow
    required: false

  OAUTH2_CLIENT_CREDENTIALS_TOKEN_URL:
    description: Token endpoint URL for OAuth2 Client Credentials flow
    required: false

  OAUTH2_CLIENT_CREDENTIALS_SCOPE:
    description: OAuth2 scopes for Client Credentials flow
    required: false

  OAUTH2_CLIENT_CREDENTIALS_AUDIENCE:
    description: OAuth2 audience for Client Credentials flow
    required: false

  OAUTH2_CLIENT_CREDENTIALS_AUTH_STYLE:
    description: OAuth2 auth style for Client Credentials flow
    required: false

# Runtime configuration
runtime:
  type: nodejs-22
  timeout: 30s
  memory: 128Mi